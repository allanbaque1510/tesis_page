import{r as s,R as N,j as a,b as V,c as $,d as q,e as z}from"./index-21055db3.js";import{A as H,U as x}from"./UtilService-c94d23f7.js";import{B as J}from"./index-ada8d22f.js";import{F as d,C as u}from"./index-6fd6f147.js";import{R as P}from"./row-36c7c26f.js";import{S as T,C as E,a as F}from"./index-7fa0c08c.js";var m=globalThis&&globalThis.__assign||function(){return m=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l])}return t},m.apply(this,arguments)},K=s.forwardRef(function(t,e){return N.createElement(J,m({},t,{chartType:"Gauge",ref:e}))});const Q=K,A=t=>{const e={width:250,height:250,data:{target:t.target,total:t.total},style:{textContent:(i,n)=>`${parseFloat(i/n*100).toFixed(2)}%`}};return a.jsx("div",{children:a.jsx(Q,{...e})})},te=()=>{var j,p,C,v,S;const t=V(),[e,i]=s.useState([]),[n,l]=s.useState([]),[O,_]=s.useState([]),[h,f]=s.useState({carrera:"",periodo:""}),[k,G]=s.useState(!0),[b]=d.useForm(),I=(c,g)=>{f({...h,carrera:g.label}),x.obtenerComboPeriodo({id_carrera:c}).then(o=>{var r,y;if(o.data.ok)if(o.data.data.configuracion===null)G(!1);else{const U=(y=(r=o==null?void 0:o.data)==null?void 0:r.data)==null?void 0:y.periodo.map((R,L)=>{var w,D;return{value:R.value,label:R.label,disabled:((D=(w=o==null?void 0:o.data)==null?void 0:w.data)==null?void 0:D.periodo.length)-o.data.data.configuracion.periodos_desercion<L}});l(U)}})},B=()=>{x.getComboCarreras().then(c=>{c.data.ok&&_(c.data.data)})},M=(c,g)=>{f({...h,periodo:g.label});const o=b.getFieldsValue();t($()),x.obtenerDashboard(o).then(r=>{r.data.ok&&(console.log(r.data.data),i(r.data.data))}).catch(r=>{t(q({success:!1,title:"Error al obtener datos del dashboard",message:r.response.data.error}))}).finally(()=>t(z()))};return s.useEffect(()=>{B()},[]),a.jsxs("div",{children:[a.jsx("h1",{children:"Dashboard"}),a.jsxs(d,{form:b,children:[!k&&a.jsx(H,{message:"No existen datos de configuracion",description:"Asigne los datos de configuracion para esta carrera antes de continuar",type:"warning",showIcon:!0}),a.jsxs(P,{style:{marginTop:"20px"},children:[a.jsx(u,{children:a.jsx(d.Item,{label:"Carrera",name:"carrera",children:a.jsx(T,{placeholder:"Seleccione una carrera",options:O,onChange:I})})}),a.jsx(u,{children:a.jsx(d.Item,{label:"Periodo",name:"periodo",children:a.jsx(T,{placeholder:"Seleccione un periodo",options:n,onChange:M})})})]})]}),a.jsxs(P,{children:[a.jsx(u,{xs:24,sm:16,md:12,lg:10,xl:7,style:{borderRadius:12,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",margin:"10px",textAlign:"center"},children:a.jsx(E,{title:"Tasa de deserci√≥n",style:{height:"100%"},children:e!=null&&e.desercion?a.jsx(A,{target:((j=e==null?void 0:e.desercion)==null?void 0:j.nivelacion)-((p=e==null?void 0:e.desercion)==null?void 0:p.actual),total:(C=e==null?void 0:e.desercion)==null?void 0:C.nivelacion}):a.jsx(F,{})})}),a.jsx(u,{xs:24,sm:16,md:12,lg:10,xl:7,style:{borderRadius:12,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",margin:"10px",textAlign:"center"},children:a.jsx(E,{title:"Tasa de Titulacion",style:{height:"100%"},children:e!=null&&e.titulacion?a.jsx(A,{target:(v=e==null?void 0:e.titulacion)==null?void 0:v.titulados,total:(S=e==null?void 0:e.titulacion)==null?void 0:S.nivelacion}):a.jsx(F,{})})})]})]})};export{te as default};
